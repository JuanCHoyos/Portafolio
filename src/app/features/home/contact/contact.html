<section class="grid grid-rows-[auto_auto] gap-8" id="contact">
  <ui-heading [heading]="HeadingType.H2">
    <ng-template #icon>
      <ui-icon
        name="lucideBriefcase"
        class="text-primary"
      ></ui-icon> </ng-template
    >Hablemos</ui-heading
  >
  <div class="flex flex-col gap-8">
    <header class="flex flex-col gap-4">
      <p class="text-sm md:text-base">
        Para solicitar un presupuesto o si quieres tomar un café, contáctanos
        directamente o completa el formulario y te responderemos a la brevedad.
      </p>
    </header>
    <form class="flex flex-col gap-4" [formGroup]="form()" (submit)="submit()">
      <div class="flex flex-col gap-2">
        <label for="name" class="text-sm md:text-base font-semibold"
          >Tu nombre</label
        >
        <input
          pInputText
          id="name"
          type="text"
          [fluid]="true"
          formControlName="name"
        />
        @if(form().get('name')?.touched && form().get('name')?.invalid){
        <ng-container
          *ngTemplateOutlet="error; context: { $implicit: 'Por favor asegúrate de ingresar un nombre con mínimo 3 caracteres.' }"
        />
        }
      </div>

      <div class="flex flex-col gap-2">
        <label for="email" class="text-sm md:text-base font-semibold"
          >Tu correo electrónico</label
        >
        <input
          pInputText
          id="email"
          type="email"
          [fluid]="true"
          formControlName="email"
        />
        @if(form().get('email')?.touched && form().get('email')?.invalid){
        <ng-container
          *ngTemplateOutlet="error; context: { $implicit: 'Formato de correo inválido, asegúrate de ingresar un email válido.' }"
        />
        }
      </div>
      <div class="flex flex-col gap-2">
        <label for="message" class="text-sm md:text-base font-semibold"
          >Tu mensaje</label
        >
        <textarea
          id="message"
          rows="5"
          cols="30"
          pTextarea
          [fluid]="true"
          [autoResize]="true"
          formControlName="message"
        ></textarea>
        @if(form().get('message')?.touched && form().get('message')?.invalid){
        <ng-container
          *ngTemplateOutlet="error; context: { $implicit: 'Contenido requerido' }"
        />
        }
      </div>
      <p-button [disabled]="form().invalid" type="submit" [fluid]="true"
        >Enviar Mensaje</p-button
      >
    </form>
  </div>
</section>

<ng-template #error let-message>
  <p-message severity="error" size="small" variant="simple">
    <span class="text-xs"> {{ message }}</span>
  </p-message>
</ng-template>
